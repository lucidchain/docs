"use strict";(self.webpackChunklucid_docs=self.webpackChunklucid_docs||[]).push([[4257],{70385:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>d,toc:()=>l});var s=n(85893),r=n(11151),t=n(16905);const a={tags:["lucid-chain","architecture","ITSM","API"],keywords:["Lucid Chain Wizard","backend architecture","Redmine integration","service chain management","environment variables","API development"],authors:[{name:"Daniel Galv\xe1n Cancio",title:"Project Contributor",url:"https://github.com/Dangalcan",image_url:"https://avatars.githubusercontent.com/u/92941017"}]},o="Lucid chain backend",d={id:"Contributing/Lucid Chain backend/Lucid Chain backend",title:"Lucid chain backend",description:"In this section we are going to learn how Lucid chain backend is structured. The first thing you can see when you enter the project, is that there are 2 parts very different from each other. The first one is back. This folder contains all backend logic and the integrations with Redmine and ITop. The other one is front, which contains all the frontend. Here you are about to explore back folder in order to understand its content. This is the most complex part of the application. It has a relatively well distributed system that integrates Redmine and ITop tools with an API in order to make them understand and support SCModel and other features. In the following sections we will describe each part.",source:"@site/versioned_docs/version-1.4/Contributing/Lucid Chain backend/Lucid Chain backend.md",sourceDirName:"Contributing/Lucid Chain backend",slug:"/Contributing/Lucid Chain backend/",permalink:"/docs/docs/Contributing/Lucid Chain backend/",draft:!1,unlisted:!1,editUrl:"https://github.com/lucidchain/docs/tree/main/packages/create-docusaurus/templates/shared/versioned_docs/version-1.4/Contributing/Lucid Chain backend/Lucid Chain backend.md",tags:[{label:"lucid-chain",permalink:"/docs/docs/tags/lucid-chain"},{label:"architecture",permalink:"/docs/docs/tags/architecture"},{label:"ITSM",permalink:"/docs/docs/tags/itsm"},{label:"API",permalink:"/docs/docs/tags/api"}],version:"1.4",lastUpdatedBy:"dangalcan",lastUpdatedAt:1745510184,formattedLastUpdatedAt:"Apr 24, 2025",frontMatter:{tags:["lucid-chain","architecture","ITSM","API"],keywords:["Lucid Chain Wizard","backend architecture","Redmine integration","service chain management","environment variables","API development"],authors:[{name:"Daniel Galv\xe1n Cancio",title:"Project Contributor",url:"https://github.com/Dangalcan",image_url:"https://avatars.githubusercontent.com/u/92941017"}]},sidebar:"documentationSidebar",previous:{title:"Data model",permalink:"/docs/docs/Contributing/Data model/"},next:{title:"Lucid chain frontend",permalink:"/docs/docs/Contributing/Lucid Chain frontend/"}},c={},l=[{value:"Main folder files",id:"main-folder-files",level:2},{value:"lucid-chain-tools directory",id:"lucid-chain-tools-directory",level:2},{value:"sc-itop directory",id:"sc-itop-directory",level:3},{value:"sc-redmine directory",id:"sc-redmine-directory",level:3},{value:"shared directory",id:"shared-directory",level:3},{value:"models directory",id:"models-directory",level:2},{value:"src directory",id:"src-directory",level:2},{value:"testing-material directory",id:"testing-material-directory",level:2},{value:"tests directory",id:"tests-directory",level:2},{value:"uploads directory",id:"uploads-directory",level:2},{value:"Enviroment variables",id:"enviroment-variables",level:2}];function h(e){const i={br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"lucid-chain-backend",children:"Lucid chain backend"}),"\n","\n","\n",(0,s.jsxs)(i.p,{children:["In this section we are going to learn how Lucid chain backend is structured. The first thing you can see when you enter the project, is that there are 2 parts very different from each other. The first one is ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"back"})}),". This folder contains all backend logic and the integrations with Redmine and ITop. The other one is ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"front"})}),", which contains all the frontend. Here you are about to explore ",(0,s.jsx)(i.em,{children:"back"})," folder in order to understand its content. This is the most complex part of the application. It has a relatively well distributed system that integrates Redmine and ITop tools with an API in order to make them understand and support SCModel and other features. In the following sections we will describe each part."]}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"Backend structure",src:n(91723).Z+"",width:"258",height:"473"}),(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Figure 1:"})," ",(0,s.jsx)(i.em,{children:"Lucid chain backend structure."})]})}),"\n",(0,s.jsx)(i.h2,{id:"main-folder-files",children:"Main folder files"}),"\n",(0,s.jsxs)(i.p,{children:["As you can see in ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"Figure 1"})})," there are some files that are not in any of the directories. Here we are going to explain all of them."]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:".env:"})})," This is a special configuration file. In case you have just cloned the repo you will not have it."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:".env.example:"})})," This is a example of how your .env file should look like. We will cover enviroment variables later."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:".gitignore:"})})," In this file we specify the files that we do not want git to track."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"app.js:"})})," This is the main file. Here we have all the application logic an the connection to the frontend. It is very important to manipulate it with caution."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"encripter.js:"})})," Here you can find all the encryption logic."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"logger.js:"})})," This the application logger."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"package.json:"})})," This file contains all the dependencies. There are some custom scripts in it."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"package-lock.json:"})})," This file contains all the project dependencies with its exact versions."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"readme.md:"})})," This file contains some information about Lucid chain and it contains some SCModel contraints and a tiny tutorial."]}),"\n"]}),"\n",(0,s.jsx)(t.Z,{children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:'"node-modules"'})})," directory is generated automatically and you do not have to worry about it."]})}),"\n",(0,s.jsx)(i.h2,{id:"lucid-chain-tools-directory",children:"lucid-chain-tools directory"}),"\n",(0,s.jsxs)(i.p,{children:["This directory contains all integration logic. The main file is called ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"index.js"})}),", and it makes it possible to manage logic from ITop and Redmine. There is also another folder called src next to it. This directory has another 3 folders inside."]}),"\n",(0,s.jsx)(i.p,{children:"Each sc-tool folder is designed with an object structure. Depending on the service_type we take functions from different files. There is a file called indexToolName.js, which groups up every feature and defines the methods in order to be usefull for index.js."}),"\n",(0,s.jsx)(i.h3,{id:"sc-itop-directory",children:"sc-itop directory"}),"\n",(0,s.jsx)(i.p,{children:"Here we find all ITop logic, including importation, exportation and so on. Metrics are also here. There another 2 extra folders, one for ITop configuration and another one for ImportModel. Both are almost deprecated and will be removed in the future."}),"\n",(0,s.jsx)(i.h3,{id:"sc-redmine-directory",children:"sc-redmine directory"}),"\n",(0,s.jsx)(i.p,{children:"Here we find all Redmine logic, including importation, exportation and so on. Metrics are also here. There another 2 extra folders, one for Redmine configuration and another one for ImportModel. Both are almost deprecated and will be removed in the future."}),"\n",(0,s.jsx)(i.h3,{id:"shared-directory",children:"shared directory"}),"\n",(0,s.jsx)(i.p,{children:"Here we can find SCModel validations and some common functions used in Redmine and ITop logic."}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"lucid-chain-tools structure",src:n(17846).Z+"",width:"318",height:"628"}),(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Figure 2:"})," ",(0,s.jsx)(i.em,{children:"lucid-chain-tools directory structure."})]})}),"\n",(0,s.jsx)(i.h2,{id:"models-directory",children:"models directory"}),"\n",(0,s.jsxs)(i.p,{children:["This folder contains a file named ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"User.js"})}),", which defines Lucid chain's users. Here we only have one file because the database is very simple. In case you need to include more entities, add them here."]}),"\n",(0,s.jsx)(i.h2,{id:"src-directory",children:"src directory"}),"\n",(0,s.jsxs)(i.p,{children:["This directory contains services and routes. In ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"routes folder"})})," we can find all app routes with it's ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"Open API Specifications"})}),"."]}),"\n",(0,s.jsx)(t.Z,{children:(0,s.jsx)(i.p,{children:"Please do not forget to include Open API specifications in case you implement a new feature or change an existing one."})}),"\n",(0,s.jsxs)(i.p,{children:["In ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"services folder"})})," we have all the functions that use index.js from lucid-chain-tools. There is one service for each feature."]}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"src structure",src:n(33623).Z+"",width:"215",height:"631"}),(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Figure 3:"})," ",(0,s.jsx)(i.em,{children:"src directory structure."})]})}),"\n",(0,s.jsx)(i.h2,{id:"testing-material-directory",children:"testing-material directory"}),"\n",(0,s.jsx)(i.p,{children:"Here we can find some examples of service chains. There are invalid yamls so we can test validations, and correct ones so we can test Redmine and ITop features. We can distinct the following folders:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"sample_yaml:"})})," This folder contains a lot of examples of valid (in ",(0,s.jsx)(i.em,{children:"valid_yaml"}),") and invalid (in ",(0,s.jsx)(i.em,{children:"invalid_yaml"}),") folders. Invalid yamls are made to test SCModel validations, and they are divided in subdirectories for a better classification."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"sql:"})})," This folder contains sql files for seeding Redmine database. They are not usefull at all because they must be updated. ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"It is deprecated."})})]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"testing_metrics_material:"})})," This folder has the same purpose but it used sample data in csv for seeding Redmine database. ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"It is also deprecated."})})]}),"\n"]}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"testing-material structure",src:n(57991).Z+"",width:"297",height:"423"}),(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Figure 4:"})," ",(0,s.jsx)(i.em,{children:"testing-material directory structure."})]})}),"\n",(0,s.jsx)(i.h2,{id:"tests-directory",children:"tests directory"}),"\n",(0,s.jsxs)(i.p,{children:["This part of the project is ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"currently empty"})}),". Here we will find all lucid chain tests in the future."]}),"\n",(0,s.jsx)(t.Z,{children:(0,s.jsx)(i.p,{children:"This section is always open to contributions because it is very important and until now no formal testing has been added. In future Lucid chain versions we will include tests, as it is an essential feature for preserve reliability when adding changes."})}),"\n",(0,s.jsx)(i.h2,{id:"uploads-directory",children:"uploads directory"}),"\n",(0,s.jsx)(i.p,{children:"This directory is not usefull and serves as a folder where the app stores uploaded files."}),"\n",(0,s.jsx)(t.Z,{children:(0,s.jsx)(i.p,{children:"In future versinos Lucid chain will delete files when it finish working with them, so this folder can be empty mostly all the time."})}),"\n",(0,s.jsx)("div",{align:"center",children:(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.img,{alt:"test and uploads structure",src:n(89082).Z+"",width:"327",height:"296"}),(0,s.jsx)(i.br,{}),"\n",(0,s.jsx)(i.strong,{children:"Figure 5:"})," ",(0,s.jsx)(i.em,{children:"tests and uploads structure."})]})}),"\n",(0,s.jsx)(i.h2,{id:"enviroment-variables",children:"Enviroment variables"}),"\n",(0,s.jsx)(i.p,{children:"Now let's cover enviroment variables. If you see what is inside .env.example, you will see the following:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-.env",children:"LOG_LEVEL=silly  ## LOG_LEVEL CAN BE: error > warn >  info > verbose > debug > silly\nNUM_DECIMALS=2  ## 2 is the recomended. The maximum is 5. More than that doesn't make sense\nJWT_SECRET=yourSecretJWT ## This env variable allows you to create secure json web tokens for lucidchain API users\n"})}),"\n",(0,s.jsx)(i.p,{children:"Lets talk about them and see what they do."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"LOG_LEVEL:"})})," This variable specifies log level. Logs are distributed in ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"layers"})}),", so you when you assign a layer, only logs in that layer or in higher ones will be shown. There are six layers, hierchally represented like this: ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"error > warn >  info > verbose > debug > silly"})}),". ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"By default LOG_LEVEL is silly"})}),", so all logs will be shown. ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"Recommended value is info"})}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"NUM_DECIMALS:"})})," This value represents the number of decimals that you want to be shown ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"in the frontend"})}),". By default its value is 2, and it is ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"recommended to not change it"})}),"."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)("u",{children:(0,s.jsx)(i.strong,{children:"JWT_SECRET:"})})," This is a secret token chosen by the system administrator, that is used to create JWT tokens. Please make it secure and keep it safe. An example of a secure token (do not use exactly this one) is: ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"qwpeq242oriu4epw\xf2qzqcnkjebv fw131eppweqmz4skcdp34heu4wndxz"})}),"."]}),"\n"]}),"\n",(0,s.jsx)(t.Z,{children:(0,s.jsxs)(i.p,{children:["Please take into account that if you are using Lucid chain in a server that already has a LOG_LEVEL defined, ",(0,s.jsx)(i.em,{children:(0,s.jsx)(i.strong,{children:"Lucid chain LOG_LEVEL enviroment variable can be ignored and substituted by the server's one"})}),". This can also happen with the max request body size allowed."]})})]})}function u(e={}){const{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},16905:(e,i,n)=>{n.d(i,{Z:()=>t});var s=n(92949),r=n(85893);function t(e){let{children:i}=e;const{colorMode:n}=(0,s.I)();return(0,r.jsxs)("div",{style:{padding:"10px",backgroundColor:"light"==n?"#fffae6":"#4a2c1d",borderLeft:"5px solid #ffa500",margin:"20px 0"},children:[(0,r.jsx)("strong",{children:"Disclaimer:"})," ",i]})}},33623:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/backendSrcStructure-3df1ba2db032e53c89ac65c9755f936c.png"},91723:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/backendStructure-09154fc0c1e81a5b1118275171d788b6.png"},17846:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/lucid-chain-toolsStructure-da18fc102ef97b1d7d353278e43df045.png"},57991:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/testing-materialStructure-a763b3b4a5fff940dd5a0577c15f4efc.png"},89082:(e,i,n)=>{n.d(i,{Z:()=>s});const s=n.p+"assets/images/uploadsAndTestStructure-a8889d60e2e6d2d44889d4f8aa38e352.png"},11151:(e,i,n)=>{n.d(i,{Z:()=>o,a:()=>a});var s=n(67294);const r={},t=s.createContext(r);function a(e){const i=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);